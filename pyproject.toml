[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.poetry]
name = "sectionproperties"
version = "1.0.8"
description = "A python package for the analysis of arbitrary cross-sections using the finite element method."
authors = [
  "Robbie van Leeuwen <robbie.vanleeuwen@gmail.com>",
]
license = "MIT"
readme = 'README_pypi.rst'
repository = "https://github.com/robbievanleeuwen/section-properties"
homepage = "https://github.com/robbievanleeuwen/section-properties"
keywords = ['section', 'cross section', 'fea']
classifiers=[
  "Development Status :: 5 - Production/Stable",
  "Environment :: Console",
  "Intended Audience :: Science/Research",
  "License :: OSI Approved :: MIT License",
  "Programming Language :: Python :: 3 :: Only",
  "Topic :: Scientific/Engineering",
]

[tool.poetry.dependencies]
python = "^3.7"
numpy = "^1.18"
scipy = "<1.6.0"
matplotlib = "^3.3"
shapely = "^1.7"
pybind11 = { version = "^2.6", markers = "sys.platform != 'win32' and sys.platform != 'cygwin'" }
MeshPy = { version = "^2020.1", markers = "sys.platform != 'win32' and sys.platform != 'cygwin'" }

[tool.poetry.dev-dependencies]
# toml is used by multiple tools to read this pyproject.toml file
toml = "^0.10"
# formatters
black = "20.8b1"
isort = "^5.6.4"
# linters/code analysis
flake8 = ">=3.6.0"
flake8-docstrings = ">=1.3.0"
flake8-bugbear = "^20.11.1"
flake8-rst = "^0.8.0"
flake8-rst-docstrings = "^0.0.14"
pylint = "2.6.0"
rstcheck = "^3.3.1"
# mypy = ">=0.800"
# testing and code coverage
pytest = "6.2.2"
coverage = "^5.4"
pre-commit = "^2.10"

[tool.black]
line-length = 100
skip-string-normalization = true

[tool.isort]
profile = "black"
line_length = 100
lines_after_imports = 2
src_paths = ["sectionproperties", "tests", "examples"]

[tool.pylint]
[tool.pylint.master]
jobs = 0
extension-pkg-whitelist = "numpy"

[tool.pylint.format]
max-line-length = 100
expected-line-ending-format = "LF"
good-names = [
  "i",
  "j",
  "k",
]

[tool.pylint.message_control]
disable = [
  "too-few-public-methods",
  "too-many-public-methods",
  "too-many-arguments",
  "too-many-branches",
  "too-many-instance-attributes",
  "too-many-lines",
  "too-many-locals",
  "too-many-statements",
  "invalid-name",
  "missing-module-docstring",
  "too-many-function-args",
  "deprecated-method",
  "missing-class-docstring",
  "attribute-defined-outside-init",
  "missing-function-docstring",
  "protected-access",
]

[tool.pylint.reports]
reports = "no"

[tool.pytest]
[tool.pytest.ini_options]
minversion = "6.2"
cache_dir = ".cache/pytest"

[tool.coverage]
[tool.coverage.run]
branch = true
source = ["sectionproperties"]
data_file = ".cache/coverage"
omit = [
  ".venv/*",
  "*/tests/*",
]

[tool.coverage.report]
precision = 2
show_missing = true

[tool.coverage.html]
directory = ".cache/htmlcov"
